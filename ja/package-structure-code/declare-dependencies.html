
<!DOCTYPE html>


<html lang="ja" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Add Required, Optional Dependencies and Dependency Groups to Your Python Package" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.pyopensci.org/python-package-guide/package-structure-code/declare-dependencies.html" />
<meta property="og:site_name" content="pyOpenSci Python Package Guide" />
<meta property="og:description" content="A Python package dependency refers to an external package or software that your Python project requires to function properly. Learn how to add different types of dependencies to your Python package." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="https://www.pyopensci.org/python-package-guide/_images/social_previews/summary_package-structure-code_declare-dependencies_ee99d3da.png" />
<meta property="og:image:alt" content="pyproject.tomlの概要ページ では、パッケージの基本的なメタデータを持つ pyproject.toml ファイルをセットアップする方法を学びました。 このページでは、 pyproject.toml で異なるタイプの依存関係を指定する方法を学びます。 パッケージ依存性とは何か？: A Python package dependency refers to an external p..." />
<meta name="description" content="pyproject.tomlの概要ページ では、パッケージの基本的なメタデータを持つ pyproject.toml ファイルをセットアップする方法を学びました。 このページでは、 pyproject.toml で異なるタイプの依存関係を指定する方法を学びます。 パッケージ依存性とは何か？: A Python package dependency refers to an external p..." />
<meta name="twitter:card" content="summary_large_image" />
    <link href="https://www.pyopensci.org/images/favicon.ico" rel="icon" type="image/x-icon">
    <title>Dependencies for your Python Package &#8212; Python Packaging Guide</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/pyos.css?v=676a615a" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=be13464f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/translations.js?v=4755f45a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'package-structure-code/declare-dependencies';</script>
    <script src="../_static/matomo.js?v=5a92784f"></script>
    <script src="../_static/language_select.js?v=a2e723a3"></script>
    <link rel="canonical" href="https://www.pyopensci.org/python-package-guide/package-structure-code/declare-dependencies.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Pythonパッケージングツール" href="python-package-build-tools.html" />
    <link rel="prev" title="Pythonパッケージのビルドについて学ぶ" href="python-package-distribution-files-sdist-wheel.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="ja"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">本文へスキップ</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>トップに戻る</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="バージョン警告"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content"><p><a href='https://www.pyopensci.org/about-peer-review/index.html'>We run peer review of scientific Python software. Learn more.</a></p></div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="サイトナビゲーション">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo-light-mode.png" class="logo__image only-light" alt="pyOpenSci Python Package Guide. The pyOpenSci logo is a purple flower with pyOpenSci under it. The o in open sci is the center of the flower"/>
    <img src="../_static/logo-dark-mode.png" class="logo__image only-dark pst-js-only" alt="pyOpenSci Python Package Guide. The pyOpenSci logo is a purple flower with pyOpenSci under it. The o in open sci is the center of the flower"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/intro.html">
    チュートリアル
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    パッケージング
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    ドキュメンテーション
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tests/index.html">
    テスト
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../continuous-integration/index.html">
    CI/CD
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.pyopensci.org">
    pyOpenSci Website
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://www.pyopensci.org/software-peer-review">
    Peer Review Guide
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://pyopensci.org/handbook">
    Handbook
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          <select class="dropdown" id="language-selector" aria-label="Choose a language">
  
<option
  value="/python-package-guide/ja/package-structure-code/declare-dependencies.html"
  selected
>
  ja
</option>
<option
  value="/python-package-guide/package-structure-code/declare-dependencies.html"
  
>
  en
</option>
</select>
        </div>
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="ライト"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="ダーク"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyopensci/python-package-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pyOpenSci" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile"><select class="dropdown" id="language-selector" aria-label="Choose a language">
  
<option
  value="/python-package-guide/ja/package-structure-code/declare-dependencies.html"
  selected
>
  ja
</option>
<option
  value="/python-package-guide/package-structure-code/declare-dependencies.html"
  
>
  en
</option>
</select>
    </div>
  
    <div class="navbar-persistent--mobile">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="検索" aria-label="検索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="このページでは">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tutorials/intro.html">
    チュートリアル
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="intro.html">
    パッケージング
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../documentation/index.html">
    ドキュメンテーション
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../tests/index.html">
    テスト
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../continuous-integration/index.html">
    CI/CD
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.pyopensci.org">
    pyOpenSci Website
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://www.pyopensci.org/software-peer-review">
    Peer Review Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://pyopensci.org/handbook">
    Handbook
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="ライト"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="ダーク"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pyopensci/python-package-guide" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pyOpenSci" title="Mastodon" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="セクションナビゲーション">
  <p class="bd-links__title" role="heading" aria-level="1">セクションナビゲーション</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">パッケージを作成 &amp; ビルドする</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro.html">イントロ</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-structure.html">Pythonパッケージ構造</a></li>
<li class="toctree-l1"><a class="reference internal" href="pyproject-toml-python-package-metadata.html">pyproject.toml パッケージのメタデータ</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-distribution-files-sdist-wheel.html">パッケージをビルドする</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">依存関係の宣言</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-build-tools.html">パッケージビルドツール</a></li>
<li class="toctree-l1"><a class="reference internal" href="complex-python-package-builds.html">複雑なビルド</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tools to manage your package</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="environment-managers.html">Environment Managers for Python Packaging</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">パッケージを公開する</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="publish-python-package-pypi-conda.html">Conda / PyPIで公開する</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-package-versions.html">パッケージバージョン</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-style-linting-format.html">コードスタイル</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="パンくずリスト" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="ホーム">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="intro.html" class="nav-link">Pythonパッケージ構造</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Dependencies for your Python Package</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="dependencies-for-your-python-package">
<h1>Dependencies for your Python Package<a class="headerlink" href="#dependencies-for-your-python-package" title="Link to this heading">#</a></h1>
<p><a class="reference internal" href="pyproject-toml-python-package-metadata.html"><span class="doc std std-doc">pyproject.tomlの概要ページ</span></a> では、パッケージの基本的なメタデータを持つ <strong>pyproject.toml</strong> ファイルをセットアップする方法を学びました。 このページでは、 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> で異なるタイプの依存関係を指定する方法を学びます。</p>
<section id="what-is-a-package-dependency">
<h2>パッケージ依存性とは何か？<a class="headerlink" href="#what-is-a-package-dependency" title="Link to this heading">#</a></h2>
<p>A Python package dependency refers to an external package or
A tool that is needed when using or working on your Python project. Declare your dependencies in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. This keeps all package metadata in one place, making it simpler for users and contributors to understand your package.</p>
<div class="tip admonition">
<p class="admonition-title">Older ways to declare dependencies</p>
<p>While <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is now the standard, you may sometimes encounter older approaches to storing dependencies &quot;in the wild&quot;:</p>
<ul class="simple">
<li><p><strong>requirements.txt</strong>: Previously common for dependencies, still used by some projects for local development</p></li>
<li><p><strong>setup.py or setup.cfg</strong>: May be needed for packages with extensions in other languages</p></li>
</ul>
<p><a class="reference external" href="https://setuptools.pypa.io/en/latest/userguide/dependency_management.html#declaring-required-dependency">Learn more in the setuptools documentation</a></p>
</div>
<section id="why-specify-dependencies">
<h3>Why specify dependencies<a class="headerlink" href="#why-specify-dependencies" title="Link to this heading">#</a></h3>
<p>Specifying dependencies in the [project.dependency] array of your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file ensures that libraries needed to run your package are correctly installed into a user's environment.
For instance, if your package requires Pandas to run properly, and you add Pandas to the <code class="docutils literal notranslate"><span class="pre">project.dependency</span></code> array, Pandas will be installed into the users' environment when they install your package using uv, pip, or conda.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pandas&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Development dependencies make it easier for contributors to work on your package. You can set up instructions for running specific workflows, such as tests, linting, and even typing, that automatically install groups of development dependencies. These dependencies can be stored in arrays (lists of dependencies) within a <code class="docutils literal notranslate"><span class="pre">[development-group]</span></code> table.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[development-group]</span>
<span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;pytest-cov&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="types-of-dependencies">
<h3>Types of dependencies<a class="headerlink" href="#types-of-dependencies" title="Link to this heading">#</a></h3>
<p>There are three different types of dependencies that you will learn about on this page:</p>
<ol class="arabic simple">
<li><p><strong>Required dependencies:</strong> These are dependencies that need to be installed for your package to work correctly in a user's environment. You add these dependencies to the <code class="docutils literal notranslate"><span class="pre">[project.dependencies]</span></code> table in your pyproject.toml file.</p></li>
<li><p><strong>Feature Dependencies:</strong> These are dependencies that are required if a user wants to access additional functionality (that is not core) to your package. Store these in the <code class="docutils literal notranslate"><span class="pre">[project.optional.dependencies]</span></code> table or your pyproject.toml file.</p></li>
<li><p><strong>Development Dependencies:</strong> These dependencies are required if someone wants to develop or work on your package. These include instance linters, testing tools like pytest and mypy are examples of development dependencies. Store these in the <code class="docutils literal notranslate"><span class="pre">[project.dependency.groups]</span></code> table or your pyproject.toml file.</p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A dependency is not part of your project's codebase. It is a package or software called
within the code of your project or used during the development of your package.</p>
</div>
</section>
</section>
<section id="required-dependencies">
<h2>1. Required dependencies<a class="headerlink" href="#required-dependencies" title="Link to this heading">#</a></h2>
<p>Required dependencies are imported and called directly within your package's code.
They are needed for your package to run.</p>
<p>You can add your required dependencies to the <code class="docutils literal notranslate"><span class="pre">dependencies</span></code> array in the
<code class="docutils literal notranslate"><span class="pre">[project]</span></code> table of your <strong>pyproject.toml</strong> file. When users install
your package with uv, pip, or conda, these dependencies will be
automatically installed alongside your package in their environment.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;examplePy&quot;</span>
<span class="n">authors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;Some Maintainer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">email</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;some-email@pyopensci.org&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pandas&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;matplotlib&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Try your best to minimize dependencies whenever possible. Remember that
fewer dependencies reduce the possibility of version conflicts in user
environments.</p>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-primary sd-bg-text-primary">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-eye" viewBox="0 0 16 16" aria-hidden="true"><path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.825.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"></path></svg></span><span class="sd-summary-text">How to Add Required Dependencies with UV</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">You can use uv to add dependencies to your pyproject.toml file:</p>
<p class="sd-card-text"><strong>Add a required dependency:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>uv<span class="w"> </span>add<span class="w"> </span>numpy
</pre></div>
</div>
<p class="sd-card-text">Will add numpy as a dependency to your <code class="docutils literal notranslate"><span class="pre">project.dependency</span></code> array:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>

<span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;numpy&gt;=2.2.6&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</details><div class="tip admonition">
<p class="admonition-title">Requiring packages from GitHub / Gitlab</p>
<p>If you have dependencies that need to be installed directly from GitHub,
you can specify them in your pyproject.toml file like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="s2">&quot;my_dependency &gt;= 1.0.1 @ git+https://git.server.example.com/mydependency.git@commitHashHere&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>IMPORTANT: If your library depends on a GitHub-hosted project,
you should point to a specific commit/tag/hash of that repository before you upload your project to
PyPI. You never know how the project might change over time. Commit hashes
are more reliable as they can't be changed</p>
</div>
</section>
<section id="optional-dependencies">
<h2>2. Optional dependencies<a class="headerlink" href="#optional-dependencies" title="Link to this heading">#</a></h2>
<p>Optional (also referred to as feature) dependencies can be installed by users as needed. Optional dependencies add specific features to your package that not all users need. For example, if your package has an optional interactive plotting feature that uses Bokeh, you would list Bokeh as an <code class="docutils literal notranslate"><span class="pre">[optional.dependency]</span></code>. Users who want interactive plotting will install it. Users who don't need plotting don't have to install it.</p>
<p>Place these dependencies in the <code class="docutils literal notranslate"><span class="pre">[project.optional-dependencies]</span></code> table.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="p">...</span>
<span class="k">[optional.dependencies]</span>
<span class="n">plot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;bokeh&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>When a user installs your package, uv, pip, or conda automatically installs all required dependencies. Optional dependencies are only installed if the user explicitly requests them.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-primary sd-bg-text-primary">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-eye" viewBox="0 0 16 16" aria-hidden="true"><path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.825.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"></path></svg></span><span class="sd-summary-text">How to Add optional.dependencies using UV</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">You can use uv to add dependencies to your pyproject.toml file:</p>
<p class="sd-card-text"><strong>Add an optional dependency:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>add<span class="w"> </span>--optional<span class="w"> </span>feature<span class="w"> </span>pandas
</pre></div>
</div>
<p class="sd-card-text">Will add this to your pyproject.toml file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[optional.dependencies]</span>
<span class="n">feature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pandas&gt;=2.3.3&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</details></section>
<section id="dependency-groups">
<h2>3. Dependency groups<a class="headerlink" href="#dependency-groups" title="Link to this heading">#</a></h2>
<p>Development dependencies include packages needed to work on your package
locally. They are used to perform tasks such as:</p>
<ul class="simple">
<li><p>running your test suite (pytest, pytest-cov)</p></li>
<li><p>building your documentation (sphinx, sphinx-theme packages)</p></li>
<li><p>linting and formatting code (ruff, black)</p></li>
<li><p>building package distribution files (build, twine)</p></li>
</ul>
<p>Dependency groups are optional because they are not required for users
to install and use your package. However, they will make it easier for
contributors to your project to setup development environments
locally.</p>
<div class="note admonition">
<p class="admonition-title">New: PEP 735 development dependency groups</p>
<p><code class="docutils literal notranslate"><span class="pre">[development-groups]</span></code> is a newer specification introduced by PEP 735.
They are intended to organize development dependencies and are intentionally separate from  <code class="docutils literal notranslate"><span class="pre">[project.optional-dependencies]</span></code>, which can be installed into a user's
environment.</p>
</div>
<section id="how-to-declare-dependency-groups">
<h3>How to declare dependency groups<a class="headerlink" href="#how-to-declare-dependency-groups" title="Link to this heading">#</a></h3>
<p>You declare development dependencies in your <strong>pyproject.toml</strong> file
within a <code class="docutils literal notranslate"><span class="pre">[development-groups]</span></code> table.</p>
<p>Similar to optional-dependencies, you can create separate subgroups or arrays with names using the syntax: <code class="docutils literal notranslate"><span class="pre">group-name</span> <span class="pre">=</span> <span class="pre">[&quot;dep1&quot;,</span> <span class="pre">&quot;dep2&quot;]</span></code></p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[development-groups]</span>
<span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pytest-cov&quot;</span><span class="p">]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sphinx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pydata-sphinx-theme&quot;</span><span class="p">]</span>
<span class="n">lint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;ruff&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;black&quot;</span><span class="p">]</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header sd-bg-primary sd-bg-text-primary">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-eye" viewBox="0 0 16 16" aria-hidden="true"><path d="M8 2c1.981 0 3.671.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.62 1.62 0 0 1 0 1.798c-.45.678-1.367 1.932-2.637 3.023C11.67 13.008 9.981 14 8 14c-1.981 0-3.671-.992-4.933-2.078C1.797 10.83.88 9.576.43 8.898a1.62 1.62 0 0 1 0-1.798c.45-.677 1.367-1.931 2.637-3.022C4.33 2.992 6.019 2 8 2ZM1.679 7.932a.12.12 0 0 0 0 .136c.411.622 1.241 1.75 2.366 2.717C5.176 11.758 6.527 12.5 8 12.5c1.473 0 2.825-.742 3.955-1.715 1.124-.967 1.954-2.096 2.366-2.717a.12.12 0 0 0 0-.136c-.412-.621-1.242-1.75-2.366-2.717C10.824 4.242 9.473 3.5 8 3.5c-1.473 0-2.825.742-3.955 1.715-1.124.967-1.954 2.096-2.366 2.717ZM8 10a2 2 0 1 1-.001-3.999A2 2 0 0 1 8 10Z"></path></svg></span><span class="sd-summary-text">How to Add [development.group] using UV</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">You can use uv to add dependencies to your pyproject.toml file:</p>
<p class="sd-card-text"><strong>Add a development group dependency:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>add<span class="w"> </span>--group<span class="w"> </span>tests<span class="w"> </span>pytest
uv<span class="w"> </span>add<span class="w"> </span>--group<span class="w"> </span>docs<span class="w"> </span>sphinx
</pre></div>
</div>
<p class="sd-card-text">Will add the following to your pyproject.toml file:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[dependency-groups]</span>
<span class="n">tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;pytest&gt;=8.4.2&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;sphinx&gt;=8.1.3&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</details></section>
</section>
<section id="understanding-required-vs-optional-dependencies">
<h2>Understanding required vs. optional dependencies<a class="headerlink" href="#understanding-required-vs-optional-dependencies" title="Link to this heading">#</a></h2>
<figure class="align-default" id="python-package-dependency-types">
<img alt="Diagram showing two main groups of Python package dependencies: required and optional. Required dependencies include core packages needed to use your package. Optional dependencies include development dependencies for working on the package locally and feature dependencies for additional functionality." src="../_images/python-package-dependency-types.png" />
<figcaption>
<p><span class="caption-text">Python package dependencies fall into two categories: <strong>required</strong>
dependencies that users need to run your package, and <strong>optional</strong>
dependencies for development work or additional features.</span><a class="headerlink" href="#python-package-dependency-types" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition-additional-dependency-resources admonition">
<p class="admonition-title">その他の依存リソース</p>
<ul class="simple">
<li><p><a class="reference external" href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#dependencies-optional-dependencies">詳細はこちら: PyPAのオプション依存関係の宣言の概要を見る</a></p></li>
<li><p><a class="reference external" href="https://packaging.python.org/en/latest/specifications/dependency-specifiers/">Dependency specifiers</a></p></li>
</ul>
</div>
<section id="install-dependency-groups">
<h3>依存グループをインストールする<a class="headerlink" href="#install-dependency-groups" title="Link to this heading">#</a></h3>
<p>When someone installs your package, only core dependencies are installed by
default. To install optional dependencies, you
need to specify which groups to include when installing the package.</p>
<figure class="align-default" id="python-package-dependencies">
<img alt="Diagram showing a Venn diagram with three sections representing dependency groups - docs, feature, and tests. In the center it shows your-package with core dependencies seaborn and numpy. Two arrows on the right demonstrate: first, python -m pip install your-package installs only the package and core dependencies. Second, python -m pip install your-package[tests] installs the package, core dependencies, and test dependencies including pytest and pytest-cov." src="../_images/python-package-dependencies.png" />
<figcaption>
<p><span class="caption-text">When a user installs your package using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">your-package</span></code>, only
your package and its core dependencies get installed. When they install
with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">your-package[tests]</span></code>, pip will install your package,
core dependencies, and the test dependencies from the
<code class="docutils literal notranslate"><span class="pre">[project.optional-dependencies]</span></code> table.</span><a class="headerlink" href="#python-package-dependencies" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="using-uv-or-pip-for-installation">
<h3>Using uv or pip for installation<a class="headerlink" href="#using-uv-or-pip-for-installation" title="Link to this heading">#</a></h3>
<p>UV streamlines this process, allowing you to sync a venv in your project directory
with both an editable install of your package and its dependencies automatically.
You can also use pip and install dependencies into the environment of your choice.</p>
<p><strong>Install development groups:</strong></p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Use UV</label><div class="sd-tab-content docutils">
<p>You can use uv sync to sync dependency groups in your uv-managed venv</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uv<span class="w"> </span>sync<span class="w"> </span>--group<span class="w"> </span>docs<span class="w">                     </span><span class="c1"># Single group</span>
<span class="gp">$ </span>uv<span class="w"> </span>sync<span class="w"> </span>--group<span class="w"> </span>docs<span class="w"> </span>--group<span class="w"> </span><span class="nb">test</span><span class="w">        </span><span class="c1"># Multiple groups</span>
<span class="gp">$ </span>uv<span class="w"> </span>sync<span class="w"> </span>--all-groups<span class="w">                     </span><span class="c1"># All development groups</span>
</pre></div>
</div>
<p><strong>Install optional dependencies:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>idea<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>using<span class="w"> </span>uv<span class="w"> </span>supported<span class="w"> </span>venvs<span class="w"> </span><span class="k">for</span><span class="w"> </span>your<span class="w"> </span>project
<span class="gp">$ </span>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[docs]&quot;</span><span class="w">              </span><span class="c1"># Single group</span>
<span class="gp">$ </span>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[docs,tests,lint]&quot;</span><span class="w">   </span><span class="c1"># Multiple groups</span>
</pre></div>
</div>
<p><strong>Install everything (package + all dependencies):</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uv<span class="w"> </span>sync<span class="w"> </span>--all-extras<span class="w"> </span>--all-groups
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">sync</span></code> is the recommended command for development workflows. It
manages your virtual environment and keeps your lockfile up to date.
Use <code class="docutils literal notranslate"><span class="pre">uv</span> <span class="pre">pip</span> <span class="pre">install</span></code> when you need pip-compatible behavior.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Use pip (version &gt;=25.1)</label><div class="sd-tab-content docutils">
<p><strong>Install optional dependencies:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m pip install -e &quot;.[docs]&quot;              # Single group</span>
<span class="go">python -m pip install -e &quot;.[docs,tests,lint]&quot;   # Multiple groups</span>
</pre></div>
</div>
<p><strong>Install dependency groups:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python -m pip install --group test              # Single group</span>
<span class="go">python -m pip install --group docs   # Multiple groups</span>
</pre></div>
</div>
<p>Always call pip using <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span></code> to ensure you're using
the pip from your current active Python environment. This helps avoid
installation conflicts.</p>
<p><strong>Note:</strong> Some shells (like zsh on Mac) require quotes around brackets to run successfully:</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;.[tests]&quot;</span></code></p>
<div class="docutils">
</div>
</div>
</div>
</section>
<section id="combining-dependency-groups">
<h3>Combining dependency groups<a class="headerlink" href="#combining-dependency-groups" title="Link to this heading">#</a></h3>
<p>You can also create combined groups that reference other groups:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project.optional-dependencies]</span>
<span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;pytest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pytest-cov&quot;</span><span class="p">]</span>
<span class="n">docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sphinx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pydata-sphinx-theme&quot;</span><span class="p">]</span>
<span class="n">dev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;your-package[test,docs]&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;build&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;twine&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Then install everything with pip install or uv sync as needed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[dev]&quot;</span>
<span class="c1"># or</span>
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;.[dev]&quot;</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When you install optional dependencies, pip and uv  install your
package and its core dependencies automatically.</p>
</div>
</section>
</section>
<section id="version-specifiers-for-dependencies">
<h2>Version specifiers for dependencies<a class="headerlink" href="#version-specifiers-for-dependencies" title="Link to this heading">#</a></h2>
<p>Version specifiers control which versions of a dependency work with your
package. Use them to specify minimum versions, exclude buggy releases, or
set version ranges.</p>
<section id="common-operators">
<h3>Common operators<a class="headerlink" href="#common-operators" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></strong> Minimum version set: <code class="docutils literal notranslate"><span class="pre">numpy&gt;=1.20</span></code> (This is the most common approach and is recommended)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">==</span></code></strong> Exact version: <code class="docutils literal notranslate"><span class="pre">requests==2.28.0</span></code> (Avoid pinning dependencies like this unless necessary)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">~=</span></code></strong> Compatible release: <code class="docutils literal notranslate"><span class="pre">django~=4.2.0</span></code> (Allows patches: &gt;=4.2.0,&lt;4.3.0)</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">&lt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></strong> - Upper/lower bounds: <code class="docutils literal notranslate"><span class="pre">pandas&gt;=1.0,&lt;3.0</span></code></p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">!=</span></code></strong> Exclude version: <code class="docutils literal notranslate"><span class="pre">scipy&gt;=1.7,!=1.8.0</span></code> (Rare but allows you to skip a buggy release version)</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>Best practice:</strong> Use <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> to specify your minimum tested version and
avoid upper bounds unless you know at what version that dependency is no longer compatible. UV will do this by
default when it adds a dependency to your pyproject.toml file. This keeps
your package flexible and reduces dependency conflicts.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;numpy&gt;=1.20&quot;</span><span class="p">,</span><span class="w">              </span><span class="c1"># Good - flexible</span>
<span class="w">    </span><span class="s2">&quot;pandas&gt;=1.0,&lt;3.0&quot;</span><span class="p">,</span><span class="w">         </span><span class="c1"># OK - known breaking change in 3.0</span>
<span class="w">    </span><span class="s2">&quot;requests==2.28.0&quot;</span><span class="p">,</span><span class="w">         </span><span class="c1"># Avoid - too restrictive</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file works great for pure-Python packages. However,
some packages (particularly in the scientific Python ecosystem) require
dependencies written in other languages like C or Fortran. Conda was
created to support the distribution of tools with non-Python dependencies.</p>
<p><strong>For conda users:</strong></p>
<p>You can maintain an <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file to help users and contributors
set up conda environments. This is especially useful for packages with
system-level dependencies like GDAL.</p>
<p><strong>Consider Pixi for conda package focused workflows:</strong></p>
<p><a class="reference external" href="https://pixi.sh">Pixi</a> is a modern package manager built on top of both
the conda and Python package ecosystems.
Pixi is able to treat conda and Python package requirements with parity when
resolving environments, but uses a &quot;conda-first&quot; approach of using already
resolved conda packages if possible when resolving Python dependencies.
Pixi <a class="reference external" href="https://pixi.sh/latest/python/pyproject_toml/">can also use <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> for configuration</a>.
If your project relies heavily on conda packages, Pixi offers a streamlined
workflow with faster dependency resolution and automatic lock file support for
full environment reproducibility.
If you already have an existing conda environment definition file, like
an <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code>, you can
<a class="reference external" href="https://pixi.sh/latest/tutorials/import/">import the environment</a> into a new
Pixi workspace with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pixi</span> <span class="n">init</span> <span class="o">--</span><span class="kn">import</span><span class="w"> </span><span class="nn">environment.yml</span>
</pre></div>
</div>
<div class="tip admonition">
<p class="admonition-title">condaユーザーへのメモ</p>
<p>If you use a conda environment for development and install your package
with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> dependencies will be installed from PyPI,
potentially overwriting conda packages that had already been installed.
This can cause conflicts, especially for packages with system dependencies.</p>
<p>To avoid this, install your package without dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span>
</pre></div>
</div>
<p>Then install dependencies through your conda <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> file.</p>
</div>
</section>
</section>
<section id="dependencies-in-read-the-docs">
<h2>Read the Docs の依存関係<a class="headerlink" href="#dependencies-in-read-the-docs" title="Link to this heading">#</a></h2>
<p>Once you've specified dependencies in your <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, you can use
them in other workflows like building documentation on Read the Docs.</p>
<p><a class="reference external" href="https://readthedocs.org">Read the Docs</a> is a documentation platform
that automatically builds and publishes your documentation. To install
your dependencies during the build process, configure them in a
<strong>readthedocs.yaml</strong> file.</p>
<p>Here's an example that installs your <code class="docutils literal notranslate"><span class="pre">docs</span></code> optional dependencies:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">python</span><span class="p">:</span>
<span class="w">  </span><span class="nt">install</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">      </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">extra_requirements</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">docs</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Learn more about Read the Docs</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.readthedocs.io/en/stable/config-file/index.html">Creating a readthedocs.yaml file</a></p></li>
<li><p><a class="reference external" href="https://docs.readthedocs.io/en/stable/build-customization.html">Using uv with Read the Docs</a></p></li>
<li><p><a class="reference external" href="https://docs.readthedocs.io/en/stable/build-customization.html#install-dependencies-with-poetry">Using Poetry with Read the Docs</a></p></li>
</ul>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="python-package-distribution-files-sdist-wheel.html"
       title="前のページ">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">前へ</p>
        <p class="prev-next-title">Pythonパッケージのビルドについて学ぶ</p>
      </div>
    </a>
    <a class="right-next"
       href="python-package-build-tools.html"
       title="次ページ">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">次へ</p>
        <p class="prev-next-title">Pythonパッケージングツール</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> このページでは
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-is-a-package-dependency">パッケージ依存性とは何か？</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#why-specify-dependencies">Why specify dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#types-of-dependencies">Types of dependencies</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#required-dependencies">1. Required dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#optional-dependencies">2. Optional dependencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependency-groups">3. Dependency groups</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-declare-dependency-groups">How to declare dependency groups</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-required-vs-optional-dependencies">Understanding required vs. optional dependencies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-dependency-groups">依存グループをインストールする</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-uv-or-pip-for-installation">Using uv or pip for installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#combining-dependency-groups">Combining dependency groups</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#version-specifiers-for-dependencies">Version specifiers for dependencies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#common-operators">Common operators</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dependencies-in-read-the-docs">Read the Docs の依存関係</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/pyopensci/python-package-guide/edit/main/package-structure-code/declare-dependencies.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          GitHub の編集
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/package-structure-code/declare-dependencies.md.txt"
            rel="nofollow">ソースコードを表示</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p>
  pyOpensci is dedicated to creating a welcoming, supportive and diverse
  community around the open source Python tools that drive open science. Our
  <a
    href="https://www.pyopensci.org/handbook/CODE_OF_CONDUCT.html"
    target="_blank"
    >Code of Conduct</a
  >
  defines expected behavior and guidelines that help create such a community.
</p></div>
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, pyOpenSci.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
</div>

  </footer>
  </body>
</html>